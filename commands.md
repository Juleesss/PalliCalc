claude --dangerously-skip-permissions "You are an autonomous coding agent running inside Cursor with full write access to this repository. Your job is to **create the complete PalliCalc project from scratch**, following the PRD in \`PRD.md\` and the instructions below. You are allowed **only in the scope of the project** to create, modify, and delete files, initialize tools, and run commands as needed.\n\n## Core Product Requirements\n\n- Read \`PRD.md\` first and strictly implement that specification.\n- Build a **lean, mobile-first, offline-capable SPA** (single-page application, client-side only, no backend, no database).\n- The app is an **opioid rotation calculator** for palliative care that:\n  - Accepts one or more current opioid regimens (drug, route, dose, frequency, optional asymmetrical dosing).\n  - Converts them to **Oral Morphine Equivalent (OME)** using the factors and rules in the PRD.\n  - Sums OMEs, applies **incomplete cross-tolerance dose reduction**, and converts into a **target opioid** and divided regimen.\n  - Implements **GFR-based safety warnings** and drug-specific cautions (e.g. methadone, nalbuphine, fentanyl patches) exactly as described.\n\n## Architecture & Tech Choices\n\n- **Frontend:**\n  - Use **React with TypeScript** and a modern bundler (Vite or similar) OR a clean Vanilla TS setup with minimal tooling. Prefer React+Vite unless there is a strong reason otherwise.\n  - Single-page app, no routing requirements beyond what's needed for a clean UX.\n  - Must build to a static bundle that can be served as plain files (no server-side rendering, no backend APIs).\n- **Python / uv usage:**\n  - Create a separate Python package (e.g. \`ome_core\`) managed by **uv** for modelling and testing the pharmacological logic.\n  - Inside the repo, create a directory (e.g. \`ome_core/\`) and **initialize a uv library project** there:\n    - Run equivalent of: \`uv init --lib ome_core\` in that subdirectory.\n    - Implement pure, well-tested functions for:\n      - Converting specific drugs/routes/frequencies to OME.\n      - Summing and reducing OMEs.\n      - Converting from OME to target drug and suggested dose splitting.\n      - Applying GFR and drug-specific safety rules.\n    - Add tests (e.g. with pytest) and make it easy to run them with \`uv run pytest\`.\n  - The frontend's calculation logic should be a faithful port of the uv-tested Python logic into TypeScript (mirrored behavior).\n\n## UX / UI Requirements\n\n- Strictly follow the PRD's UX guidelines:\n  - **Card-based layout** for:\n    - Patient parameters (including GFR and warnings).\n    - Current regimen(s).\n    - Target regimen & results.\n  - **Mobile-first**, touch-friendly UI:\n    - Big, easily tappable buttons and controls.\n    - Layout that works well on phones and tablets.\n  - **Language support:**\n    - Primary UI in **Hungarian**, with an easy way to switch to **English** (it can be a simple toggle or button).\n    - Code (variable names, comments) in English is fine.\n  - Prominent **red/orange safety warnings** when:\n    - GFR < 30 ml/min.\n    - Methadone or other warned drugs are involved.\n    - Any situation described as high risk in the PRD.\n- On load, the app should **immediately show the calculator** (no login, no splash beyond a very light intro).\n\n## Data & Safety Logic\n\n- Implement the exact **OME conversion table** and special cases from \`PRD.md\`:\n  - Factors TO/FROM OME per drug/route.\n  - Special handling of **fentanyl patches (mcg/hr)** with the given 72-hour conversion table.\n  - Warnings / exclusions for **methadone**, **nalbuphine**, etc.\n- Implement the **calculation flow exactly**:\n  1. Current drug(s) → total daily dose (TDD), including support for asymmetrical dosing.\n  2. TDD × (factor TO OME) → OME per drug.\n  3. Sum all OMEs → Total Current OME.\n  4. Apply clinician-chosen **% dose reduction** (typically 25–50%).\n  5. Multiply by factor FROM OME to the target drug.\n  6. Compute **target daily dose** and intelligently suggest divided doses based on standard frequencies (e.g. 12h, 24h, rescue doses).\n- Everything must be **purely client-side**, with **no storage of patient data**.\n\n## Project Structure & Tooling\n\n- At the repository root:\n  - Add a concise \`README.md\` describing:\n    - What PalliCalc does.\n    - How to run the frontend.\n    - How to use \`uv\` for the Python logic.\n  - **Initialize git** if not already present:\n    - Run \`git init\` at the repository root.\n    - Create a comprehensive \`.gitignore\` that excludes:\n      - \`node_modules/\`\n      - \`dist/\`, \`build/\`, or other frontend build artifacts.\n      - \`.venv/\`, \`__pycache__/\`, \`*.pyc\`, \`.pytest_cache/\` for Python.\n      - \`.uv/\` or other uv-specific cache directories.\n      - IDE-specific files (\`.vscode/\`, \`.idea/\`, etc.) if appropriate.\n      - OS-specific files (\`.DS_Store\`, \`Thumbs.db\`).\n    - Make an **initial commit** with a clear message like \"Initial project scaffold for PalliCalc\".\n    - After each major milestone (e.g., frontend setup complete, Python core logic implemented, UI complete), make **meaningful commits** with descriptive messages.\n- **Frontend:**\n  - Create a \`frontend/\` directory (or similar) containing the SPA source.\n  - Provide clear \`npm\` or \`pnpm\` scripts for:\n    - \`dev\` (development server),\n    - \`build\` (production build),\n    - \`preview\` or \`serve\` (optional).\n- **Python / uv:**\n  - Under \`ome_core/\` (or similar):\n    - Use \`uv\` to manage dependencies and the environment exclusively (no separate virtualenv).\n    - Clearly document common commands in the repo \`README.md\` and a local \`ome_core/README.md\`, e.g.:\n      - \`uv sync\`\n      - \`uv add\`\n      - \`uv run pytest\`\n\n## Quality & Testing\n\n- Implement unit tests for:\n  - Core OME conversion functions in the Python package (via uv).\n  - At least a few key frontend functions that wrap the calculation logic (using the chosen JS test framework if applicable).\n- Ensure calculations are deterministic and robust against:\n  - High doses (no arbitrary upper limits beyond numeric sanity).\n  - Multiple concurrent drugs.\n  - Edge cases in frequency and asymmetrical dosing.\n\n## Style & Developer Experience\n\n- Prefer **TypeScript** over plain JS in the frontend.\n- Structure code cleanly:\n  - Separate calculation logic from UI components.\n  - Keep drug tables and conversion factors in a dedicated data module.\n- Use clear, self-documenting names and minimal but helpful comments, especially around pharmacological logic and safety rules.\n- Do not add unnecessary external dependencies; keep the stack as lean as possible.\n\n## Your Tasks (High-Level)\n\n1. Read \`PRD.md\` and fully understand the requirements.\n2. Set up:\n   - A React+TypeScript SPA (or similar) in \`frontend/\`.\n   - A uv-managed Python library in \`ome_core/\` implementing and testing the core logic.\n3. Initialize git tracking:\n   - Run \`git init\` if needed.\n   - Create a proper \`.gitignore\`.\n   - Make an initial commit.\n   - Commit regularly at logical milestones with clear, descriptive messages.\n4. Implement the full OME and rotation logic as specified, including all safety and warning behaviors.\n5. Build the mobile-first UI and language toggle exactly as described.\n6. Add minimal, focused tests and documentation.\n7. Ensure the project can be run locally with:\n   - \`npm install\` + \`npm run dev\` (or equivalent) in \`frontend/\`.\n   - \`uv sync\` + \`uv run pytest\` in \`ome_core/\`.\n\nWork autonomously until the project is fully scaffolded and functionally complete according to this description and \`PRD.md\`. Track your progress with git commits at each major step."